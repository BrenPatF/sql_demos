
Database             Time                 Version
-------------------- -------------------- ------------------------------
Start: ORCL          25-NOV-2017 08:50:26 Oracle Database 12c 12.2.0.1.0

Elapsed: 00:00:00.00

Table truncated.

Elapsed: 00:00:00.00

Table truncated.

Elapsed: 00:00:00.00

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.00
Input Data - Items

        ID ITEM_WEIGHT R_SUM_WEIGHT ITEM_PROFIT R_SUM_PROFIT
---------- ----------- ------------ ----------- ------------
         1           3            3          10           10
         2           4            7          20           30
         3           5           12          30           60
         4           6           18          40          100

Elapsed: 00:00:00.00
Input Data - Containers

        ID NAME                           MAX_WEIGHT
---------- ------------------------------ ----------
         1 Con 1                                   8
         2 Con 2                                  10

Elapsed: 00:00:00.00

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.12

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.00
Tree

    CON_ID MAX_WEIGHT ITM_ ITM_PATH                       TOT_WEIGHT TOT_PROFIT
---------- ---------- ---- ------------------------------ ---------- ----------
         1          8 1    ,1,                                     3         10
                        2  ,1,2,                                   7         30
                        3  ,1,3,                                   8         40
                      2    ,2,                                     4         20
                      3    ,3,                                     5         30
                      4    ,4,                                     6         40
         2         10 1    ,1,                                     3         10
                        2  ,1,2,                                   7         30
                        3  ,1,3,                                   8         40
                        4  ,1,4,                                   9         50
                      2    ,2,                                     4         20
                        3  ,2,3,                                   9         50
                        4  ,2,4,                                  10         60
                      3    ,3,                                     5         30
                      4    ,4,                                     6         40

15 rows selected.

Elapsed: 00:00:00.01

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.14
Solution with path tree

CON_ITM_SE CON_ITM_PATH         TOT_WEIGHT TOT_PROFIT
---------- -------------------- ---------- ----------
:1:,1,     :1:,1,                        3         10
  :2:,2,   :1:,1,:2:,2,                  7         30
  :2:,3,   :1:,1,:2:,3,                  8         40
  :2:,4,   :1:,1,:2:,4,                  9         50
  :2:,2,3, :1:,1,:2:,2,3,               12         60
  :2:,2,4, :1:,1,:2:,2,4,               13         70
:1:,2,     :1:,2,                        4         20
  :2:,1,   :1:,2,:2:,1,                  7         30
  :2:,3,   :1:,2,:2:,3,                  9         50
  :2:,1,3, :1:,2,:2:,1,3,               12         60
  :2:,4,   :1:,2,:2:,4,                 10         60
  :2:,1,4, :1:,2,:2:,1,4,               13         70
:1:,1,2,   :1:,1,2,                      7         30
  :2:,3,   :1:,1,2,:2:,3,               12         60
  :2:,4,   :1:,1,2,:2:,4,               13         70
:1:,3,     :1:,3,                        5         30
  :2:,1,   :1:,3,:2:,1,                  8         40
  :2:,2,   :1:,3,:2:,2,                  9         50
  :2:,1,2, :1:,3,:2:,1,2,               12         60
  :2:,4,   :1:,3,:2:,4,                 11         70
  :2:,1,4, :1:,3,:2:,1,4,               14         80
  :2:,2,4, :1:,3,:2:,2,4,               15         90
:1:,1,3,   :1:,1,3,                      8         40
  :2:,2,   :1:,1,3,:2:,2,               12         60
  :2:,4,   :1:,1,3,:2:,4,               14         80
  :2:,2,4, :1:,1,3,:2:,2,4,             18        100
:1:,4,     :1:,4,                        6         40
  :2:,1,   :1:,4,:2:,1,                  9         50
  :2:,2,   :1:,4,:2:,2,                 10         60
  :2:,1,2, :1:,4,:2:,1,2,               13         70
  :2:,3,   :1:,4,:2:,3,                 11         70
  :2:,1,3, :1:,4,:2:,1,3,               14         80
  :2:,2,3, :1:,4,:2:,2,3,               15         90
:2:,1,     :2:,1,                        3         10
:2:,2,     :2:,2,                        4         20
:2:,1,2,   :2:,1,2,                      7         30
:2:,3,     :2:,3,                        5         30
:2:,1,3,   :2:,1,3,                      8         40
:2:,4,     :2:,4,                        6         40
:2:,1,4,   :2:,1,4,                      9         50
:2:,2,3,   :2:,2,3,                      9         50
:2:,2,4,   :2:,2,4,                     10         60

42 rows selected.

Elapsed: 00:00:00.02

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.13
Solution with path

    SOL_ID ITM_PATH                       TOT_WEIGHT TOT_PROFIT
---------- ------------------------------ ---------- ----------
         1 :1:,1,3,:2:,2,4,:                      18        100
         2 :1:,3,:2:,2,4,:                        15         90
         3 :1:,4,:2:,2,3,:                        15         90
         4 :1:,4,:2:,1,3,:                        14         80
         5 :1:,3,:2:,1,4,:                        14         80
         6 :1:,1,3,:2:,4,:                        14         80
         7 :1:,4,:2:,1,2,:                        13         70
         8 :1:,1,2,:2:,4,:                        13         70
         9 :1:,2,:2:,1,4,:                        13         70
        10 :1:,1,:2:,2,4,:                        13         70
        11 :1:,3,:2:,4,:                          11         70
        12 :1:,4,:2:,3,:                          11         70
        13 :1:,2,:2:,1,3,:                        12         60
        14 :1:,3,:2:,1,2,:                        12         60
        15 :1:,1,:2:,2,3,:                        12         60
        16 :1:,1,2,:2:,3,:                        12         60
        17 :1:,1,3,:2:,2,:                        12         60
        18 :1:,2,:2:,4,:                          10         60
        19 :1:,4,:2:,2,:                          10         60
        20 :2:,2,4,:                              10         60
        21 :1:,2,:2:,3,:                           9         50
        22 :1:,1,:2:,4,:                           9         50
        23 :1:,4,:2:,1,:                           9         50
        24 :2:,2,3,:                               9         50
        25 :2:,1,4,:                               9         50
        26 :1:,3,:2:,2,:                           9         50
        27 :1:,3,:2:,1,:                           8         40
        28 :1:,1,:2:,3,:                           8         40
        29 :2:,1,3,:                               8         40
        30 :1:,1,3,:                               8         40
        31 :2:,4,:                                 6         40
        32 :1:,4,:                                 6         40
        33 :1:,1,:2:,2,:                           7         30
        34 :2:,1,2,:                               7         30
        35 :1:,1,2,:                               7         30
        36 :1:,2,:2:,1,:                           7         30
        37 :1:,3,:                                 5         30
        38 :2:,3,:                                 5         30
        39 :2:,2,:                                 4         20
        40 :1:,2,:                                 4         20
        41 :2:,1,:                                 3         10
        42 :1:,1,:                                 3         10

42 rows selected.

Elapsed: 00:00:00.02

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.11
Solution with SQL and functions

    SOL_ID       S_WT       S_PR       C_ID C_NAME                               M_WT       C_WT       I_ID       I_WT       I_PR
---------- ---------- ---------- ---------- ------------------------------ ---------- ---------- ---------- ---------- ----------
         1         18        100          1 Con 1                                   8          8          1          3         10
                                                                                                          3          5         30
                                          2 Con 2                                  10         10          2          4         20
                                                                                                          4          6         40

:1:,1,3,:2:,2,4,:
Elapsed: 00:00:00.04

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.13
Solution with SQL and functions, with CARDINALITY hint

    SOL_ID       S_WT       S_PR       C_ID C_NAME                               M_WT       C_WT       I_ID       I_WT       I_PR
---------- ---------- ---------- ---------- ------------------------------ ---------- ---------- ---------- ---------- ----------
         1         18        100          1 Con 1                                   8          8          1          3         10
                                                                                                          3          5         30
                                          2 Con 2                                  10         10          2          4         20
                                                                                                          4          6         40

:1:,1,3,:2:,2,4,:
Elapsed: 00:00:00.02

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.13

TEXT
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SQL_ID  fbrjydhk7sjpg, child number 0
-------------------------------------
WITH /* XTRE */ rsf_itm (con_id, max_weight, itm_id, lev, tot_weight,
tot_profit, path) AS ( SELECT c.id,        c.max_weight,        i.id,
     0,        i.item_weight,        i.item_profit,        ',' || i.id
|| ','   FROM items i   JOIN containers c     ON i.item_weight <=
c.max_weight  UNION ALL SELECT r.con_id,        r.max_weight,
i.id,        r.lev + 1,        r.tot_weight + i.item_weight,
r.tot_profit + i.item_profit,        r.path || i.id || ','   FROM
rsf_itm r   JOIN items i     ON i.id > r.itm_id    AND r.tot_weight +
i.item_weight <= r.max_weight  ORDER BY 1, 2 ) SEARCH DEPTH FIRST BY
con_id, itm_id SET line_no SELECT  /*+ gather_plan_statistics */
con_id,        max_weight,        LPad (To_Char(itm_id), 2*lev + 1, '
') itm_id,        path itm_path,        tot_weight, tot_profit   FROM
rsf_itm  ORDER BY line_no

Plan hash value: 2211994153

---------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                               | Name         | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
---------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                        |              |      1 |        |     15 |00:00:00.01 |      27 |       |       |          |
|   1 |  VIEW                                   |              |      1 |      9 |     15 |00:00:00.01 |      27 |       |       |          |
|   2 |   UNION ALL (RECURSIVE WITH) DEPTH FIRST|              |      1 |        |     15 |00:00:00.01 |      27 |  2048 |  2048 | 2048  (0)|
|   3 |    NESTED LOOPS                         |              |      1 |      8 |      8 |00:00:00.01 |      21 |       |       |          |
|   4 |     TABLE ACCESS FULL                   | CONTAINERS   |      1 |      2 |      2 |00:00:00.01 |       7 |       |       |          |
|*  5 |     TABLE ACCESS FULL                   | ITEMS        |      2 |      4 |      8 |00:00:00.01 |      14 |       |       |          |
|   6 |    NESTED LOOPS                         |              |      2 |      1 |      7 |00:00:00.01 |       6 |       |       |          |
|   7 |     NESTED LOOPS                        |              |      2 |      1 |     19 |00:00:00.01 |       4 |       |       |          |
|   8 |      RECURSIVE WITH PUMP                |              |      2 |        |     15 |00:00:00.01 |       0 |       |       |          |
|*  9 |      INDEX RANGE SCAN                   | SYS_C0020363 |     15 |      1 |     19 |00:00:00.01 |       4 |       |       |          |
|* 10 |     TABLE ACCESS BY INDEX ROWID         | ITEMS        |     19 |      1 |      7 |00:00:00.01 |       2 |       |       |          |
---------------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   5 - filter("I"."ITEM_WEIGHT"<="C"."MAX_WEIGHT")
   9 - access("I"."ID">"R"."ITM_ID")
  10 - filter("R"."MAX_WEIGHT">="R"."TOT_WEIGHT"+"I"."ITEM_WEIGHT")

SQL_ID  4rm6pzsftaz43, child number 0
-------------------------------------
WITH /* XTR2 */ rsf_itm (con_id, max_weight, itm_id, tot_weight,
tot_profit, path) AS ( SELECT c.id,        c.max_weight,        i.id,
     i.item_weight,        i.item_profit,        ',' || i.id || ','
FROM items i   JOIN containers c     ON i.item_weight <= c.max_weight
UNION ALL SELECT r.con_id,        r.max_weight,        i.id,
r.tot_weight + i.item_weight,        r.tot_profit + i.item_profit,
  r.path || i.id || ','   FROM rsf_itm r   JOIN items i     ON i.id >
r.itm_id    AND r.tot_weight + i.item_weight <= r.max_weight ) ,
rsf_con (con_id, con_itm_set, con_itm_path, lev, tot_weight,
tot_profit) AS ( SELECT con_id,        ':' || con_id || ':' || path,
    ':' || con_id || ':' || path,        0,        tot_weight,
tot_profit   FROM rsf_itm  UNION ALL SELECT r_i.con_id,        ':' ||
r_i.con_id || ':' || r_i.path,        r_c.con_itm_path ||  ':' ||
r_i.con_id || ':' || r_i.path,        r_c.lev + 1,
r_c.tot_weight + r_i.tot_weight,        r_c.tot_pr

Plan hash value: 1605200382

--------------------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                                  | Name                       | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
--------------------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                           |                            |      1 |        |     42 |00:00:00.01 |      29 |       |       |          |
|   1 |  TEMP TABLE TRANSFORMATION                 |                            |      1 |        |     42 |00:00:00.01 |      29 |       |       |          |
|   2 |   LOAD AS SELECT (CURSOR DURATION MEMORY)  | SYS_TEMP_0FD9D6747_150DC9F |      1 |        |      0 |00:00:00.01 |      28 |  1024 |  1024 |          |
|   3 |    UNION ALL (RECURSIVE WITH) BREADTH FIRST|                            |      1 |        |     15 |00:00:00.01 |      27 |  2048 |  2048 | 2048  (0)|
|   4 |     NESTED LOOPS                           |                            |      1 |      8 |      8 |00:00:00.01 |      21 |       |       |          |
|   5 |      TABLE ACCESS FULL                     | CONTAINERS                 |      1 |      2 |      2 |00:00:00.01 |       7 |       |       |          |
|*  6 |      TABLE ACCESS FULL                     | ITEMS                      |      2 |      4 |      8 |00:00:00.01 |      14 |       |       |          |
|   7 |     NESTED LOOPS                           |                            |      2 |      1 |      7 |00:00:00.01 |       6 |       |       |          |
|   8 |      NESTED LOOPS                          |                            |      2 |      1 |     19 |00:00:00.01 |       4 |       |       |          |
|   9 |       RECURSIVE WITH PUMP                  |                            |      2 |        |     15 |00:00:00.01 |       0 |       |       |          |
|* 10 |       INDEX RANGE SCAN                     | SYS_C0020363               |     15 |      1 |     19 |00:00:00.01 |       4 |       |       |          |
|* 11 |      TABLE ACCESS BY INDEX ROWID           | ITEMS                      |     19 |      1 |      7 |00:00:00.01 |       2 |       |       |          |
|  12 |   VIEW                                     |                            |      1 |     10 |     42 |00:00:00.01 |       0 |       |       |          |
|  13 |    UNION ALL (RECURSIVE WITH) DEPTH FIRST  |                            |      1 |        |     42 |00:00:00.01 |       0 |  6144 |  6144 | 6144  (0)|
|  14 |     VIEW                                   |                            |      1 |      9 |     15 |00:00:00.01 |       0 |       |       |          |
|  15 |      TABLE ACCESS FULL                     | SYS_TEMP_0FD9D6747_150DC9F |      1 |      9 |     15 |00:00:00.01 |       0 |       |       |          |
|  16 |     NESTED LOOPS                           |                            |      2 |      1 |     27 |00:00:00.01 |       0 |       |       |          |
|  17 |      RECURSIVE WITH PUMP                   |                            |      2 |        |     42 |00:00:00.01 |       0 |       |       |          |
|* 18 |      VIEW                                  |                            |     42 |      1 |     27 |00:00:00.01 |       0 |       |       |          |
|  19 |       TABLE ACCESS FULL                    | SYS_TEMP_0FD9D6747_150DC9F |     42 |      9 |    630 |00:00:00.01 |       0 |       |       |          |
--------------------------------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   6 - filter("I"."ITEM_WEIGHT"<="C"."MAX_WEIGHT")
  10 - access("I"."ID">"R"."ITM_ID")
  11 - filter("R"."MAX_WEIGHT">="R"."TOT_WEIGHT"+"I"."ITEM_WEIGHT")
  18 - filter(( REGEXP_INSTR ("R_C"."CON_ITM_PATH"||"R_I"."PATH",',(\d+),.*?,\1,',HEXTORAW('187532B2F87F0000E031E259F67F000000000000000000008033E259F6
              7F0000000000000000000000000000000000006800000000000000987532B2F87F000009000100000000000000000001000000B09B0B52F67F00000000000000000000'))=0 AND
              "R_I"."CON_ID">"R_C"."CON_ID"))

SQL_ID  gsv5fpa2smjsf, child number 0
-------------------------------------
WITH /* XSTR */ rsf_itm (con_id, max_weight, itm_id, tot_weight,
tot_profit, path) AS ( SELECT c.id,        c.max_weight,        i.id,
     i.item_weight,        i.item_profit,        ',' || i.id || ','
FROM items i   JOIN containers c     ON i.item_weight <= c.max_weight
UNION ALL SELECT r.con_id,        r.max_weight,        i.id,
r.tot_weight + i.item_weight,        r.tot_profit + i.item_profit,
  r.path || i.id || ','   FROM rsf_itm r   JOIN items i     ON i.id >
r.itm_id    AND r.tot_weight + i.item_weight <= r.max_weight  ORDER BY
1, 2 ) , rsf_con (con_id, itm_path, lev, tot_weight, tot_profit) AS (
SELECT con_id,        ':' || con_id || ':' || path,        0,
tot_weight,        tot_profit   FROM rsf_itm  UNION ALL SELECT
r_i.con_id,        r_c.itm_path ||  ':' || r_i.con_id || ':' ||
r_i.path,        r_c.lev + 1,        r_c.tot_weight + r_i.tot_weight,
     r_c.tot_profit + r_i.tot_profit   FROM rsf_con r_c   JOIN rsf_itm
r_i     ON r_i.con_id > r_c.con_

Plan hash value: 3535922624

-----------------------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                                     | Name                       | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                              |                            |      1 |        |     42 |00:00:00.01 |      29 |       |       |          |
|   1 |  TEMP TABLE TRANSFORMATION                    |                            |      1 |        |     42 |00:00:00.01 |      29 |       |       |          |
|   2 |   LOAD AS SELECT (CURSOR DURATION MEMORY)     | SYS_TEMP_0FD9D6748_150DC9F |      1 |        |      0 |00:00:00.01 |      28 |  1024 |  1024 |          |
|   3 |    UNION ALL (RECURSIVE WITH) BREADTH FIRST   |                            |      1 |        |     15 |00:00:00.01 |      27 |  2048 |  2048 | 2048  (0)|
|   4 |     NESTED LOOPS                              |                            |      1 |      8 |      8 |00:00:00.01 |      21 |       |       |          |
|   5 |      TABLE ACCESS FULL                        | CONTAINERS                 |      1 |      2 |      2 |00:00:00.01 |       7 |       |       |          |
|*  6 |      TABLE ACCESS FULL                        | ITEMS                      |      2 |      4 |      8 |00:00:00.01 |      14 |       |       |          |
|   7 |     NESTED LOOPS                              |                            |      2 |      1 |      7 |00:00:00.01 |       6 |       |       |          |
|   8 |      NESTED LOOPS                             |                            |      2 |      1 |     19 |00:00:00.01 |       4 |       |       |          |
|   9 |       RECURSIVE WITH PUMP                     |                            |      2 |        |     15 |00:00:00.01 |       0 |       |       |          |
|* 10 |       INDEX RANGE SCAN                        | SYS_C0020363               |     15 |      1 |     19 |00:00:00.01 |       4 |       |       |          |
|* 11 |      TABLE ACCESS BY INDEX ROWID              | ITEMS                      |     19 |      1 |      7 |00:00:00.01 |       2 |       |       |          |
|  12 |   SORT ORDER BY                               |                            |      1 |     10 |     42 |00:00:00.01 |       0 |  4096 |  4096 | 4096  (0)|
|  13 |    VIEW                                       |                            |      1 |     10 |     42 |00:00:00.01 |       0 |       |       |          |
|  14 |     WINDOW SORT                               |                            |      1 |     10 |     42 |00:00:00.01 |       0 |  4096 |  4096 | 4096  (0)|
|  15 |      VIEW                                     |                            |      1 |     10 |     42 |00:00:00.01 |       0 |       |       |          |
|  16 |       UNION ALL (RECURSIVE WITH) BREADTH FIRST|                            |      1 |        |     42 |00:00:00.01 |       0 |  2048 |  2048 | 2048  (0)|
|  17 |        VIEW                                   |                            |      1 |      9 |     15 |00:00:00.01 |       0 |       |       |          |
|  18 |         TABLE ACCESS FULL                     | SYS_TEMP_0FD9D6748_150DC9F |      1 |      9 |     15 |00:00:00.01 |       0 |       |       |          |
|  19 |        NESTED LOOPS                           |                            |      2 |      1 |     27 |00:00:00.01 |       0 |       |       |          |
|  20 |         RECURSIVE WITH PUMP                   |                            |      2 |        |     42 |00:00:00.01 |       0 |       |       |          |
|* 21 |         VIEW                                  |                            |     42 |      1 |     27 |00:00:00.01 |       0 |       |       |          |
|  22 |          TABLE ACCESS FULL                    | SYS_TEMP_0FD9D6748_150DC9F |     42 |      9 |    630 |00:00:00.01 |       0 |       |       |          |
-----------------------------------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   6 - filter("I"."ITEM_WEIGHT"<="C"."MAX_WEIGHT")
  10 - access("I"."ID">"R"."ITM_ID")
  11 - filter("R"."MAX_WEIGHT">="R"."TOT_WEIGHT"+"I"."ITEM_WEIGHT")
  21 - filter(( REGEXP_INSTR ("R_C"."ITM_PATH"||"R_I"."PATH",',(\d+),.*?,\1,',HEXTORAW('78A12FB2F87F0000E031E259F67F000000000000000000008033E259F67F00000
              00000000000000000000000000000006800000000000000F8A12FB2F87F000009000100000000000000000001000000B09B0B52F67F00000000000000000000'))=0 AND
              "R_I"."CON_ID">"R_C"."CON_ID"))

SQL_ID  2662g75w0gra0, child number 0
-------------------------------------
WITH /* XFUN */ rsf_itm (con_id, max_weight, itm_id, tot_weight,
tot_profit, path) AS ( SELECT c.id,        c.max_weight,        i.id,
     i.item_weight,        i.item_profit,        ',' || i.id || ','
FROM items i   JOIN containers c     ON i.item_weight <= c.max_weight
UNION ALL SELECT r.con_id,        r.max_weight,        i.id,
r.tot_weight + i.item_weight,        r.tot_profit + i.item_profit,
  r.path || i.id || ','   FROM rsf_itm r   JOIN items i     ON i.id >
r.itm_id    AND r.tot_weight + i.item_weight <= r.max_weight  ORDER BY
1, 2 ) , rsf_con (con_id, itm_path, tot_weight, tot_profit) AS ( SELECT
con_id,        ':' || con_id || ':' || path,        tot_weight,
tot_profit   FROM rsf_itm  UNION ALL SELECT r_i.con_id,
r_c.itm_path ||  ':' || r_i.con_id || ':' || r_i.path,
r_c.tot_weight + r_i.tot_weight,        r_c.tot_profit + r_i.tot_profit
  FROM rsf_con r_c   JOIN rsf_itm r_i     ON r_i.con_id > r_c.con_id
WHERE RegExp_Instr (r_c.itm_pat

Plan hash value: 2979087488

---------------------------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                                         | Name                       | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                                  |                            |      1 |        |      4 |00:00:00.02 |     465 |       |       |          |
|   1 |  TEMP TABLE TRANSFORMATION                        |                            |      1 |        |      4 |00:00:00.02 |     465 |       |       |          |
|   2 |   LOAD AS SELECT (CURSOR DURATION MEMORY)         | SYS_TEMP_0FD9D6749_150DC9F |      1 |        |      0 |00:00:00.01 |      28 |  1024 |  1024 |          |
|   3 |    UNION ALL (RECURSIVE WITH) BREADTH FIRST       |                            |      1 |        |     15 |00:00:00.01 |      27 |  2048 |  2048 | 2048  (0)|
|   4 |     NESTED LOOPS                                  |                            |      1 |      8 |      8 |00:00:00.01 |      21 |       |       |          |
|   5 |      TABLE ACCESS FULL                            | CONTAINERS                 |      1 |      2 |      2 |00:00:00.01 |       7 |       |       |          |
|*  6 |      TABLE ACCESS FULL                            | ITEMS                      |      2 |      4 |      8 |00:00:00.01 |      14 |       |       |          |
|   7 |     NESTED LOOPS                                  |                            |      2 |      1 |      7 |00:00:00.01 |       6 |       |       |          |
|   8 |      NESTED LOOPS                                 |                            |      2 |      1 |     19 |00:00:00.01 |       4 |       |       |          |
|   9 |       RECURSIVE WITH PUMP                         |                            |      2 |        |     15 |00:00:00.01 |       0 |       |       |          |
|* 10 |       INDEX RANGE SCAN                            | SYS_C0020363               |     15 |      1 |     19 |00:00:00.01 |       4 |       |       |          |
|* 11 |      TABLE ACCESS BY INDEX ROWID                  | ITEMS                      |     19 |      1 |      7 |00:00:00.01 |       2 |       |       |          |
|  12 |   SORT ORDER BY                                   |                            |      1 |  81680 |      4 |00:00:00.01 |     436 |  2048 |  2048 | 2048  (0)|
|  13 |    WINDOW SORT                                    |                            |      1 |  81680 |      4 |00:00:00.01 |     436 |  2048 |  2048 | 2048  (0)|
|* 14 |     HASH JOIN                                     |                            |      1 |  81680 |      4 |00:00:00.01 |     436 |  1743K|  1743K|  956K (0)|
|  15 |      TABLE ACCESS FULL                            | ITEMS                      |      1 |      4 |      4 |00:00:00.01 |       7 |       |       |          |
|* 16 |      HASH JOIN                                    |                            |      1 |  81680 |      4 |00:00:00.01 |     429 |  1610K|  1610K|  846K (0)|
|  17 |       TABLE ACCESS FULL                           | CONTAINERS                 |      1 |      2 |      2 |00:00:00.01 |       7 |       |       |          |
|  18 |       NESTED LOOPS                                |                            |      1 |  81680 |      4 |00:00:00.01 |     422 |       |       |          |
|* 19 |        VIEW                                       |                            |      1 |     10 |      1 |00:00:00.01 |       0 |       |       |          |
|* 20 |         WINDOW SORT PUSHED RANK                   |                            |      1 |     10 |      1 |00:00:00.01 |       0 |  4096 |  4096 | 4096  (0)|
|  21 |          VIEW                                     |                            |      1 |     10 |     42 |00:00:00.01 |       0 |       |       |          |
|  22 |           UNION ALL (RECURSIVE WITH) BREADTH FIRST|                            |      1 |        |     42 |00:00:00.01 |       0 |  2048 |  2048 | 2048  (0)|
|  23 |            VIEW                                   |                            |      1 |      9 |     15 |00:00:00.01 |       0 |       |       |          |
|  24 |             TABLE ACCESS FULL                     | SYS_TEMP_0FD9D6749_150DC9F |      1 |      9 |     15 |00:00:00.01 |       0 |       |       |          |
|  25 |            NESTED LOOPS                           |                            |      2 |      1 |     27 |00:00:00.01 |       0 |       |       |          |
|  26 |             RECURSIVE WITH PUMP                   |                            |      2 |        |     42 |00:00:00.01 |       0 |       |       |          |
|* 27 |             VIEW                                  |                            |     42 |      1 |     27 |00:00:00.01 |       0 |       |       |          |
|  28 |              TABLE ACCESS FULL                    | SYS_TEMP_0FD9D6749_150DC9F |     42 |      9 |    630 |00:00:00.01 |       0 |       |       |          |
|  29 |        COLLECTION ITERATOR PICKLER FETCH          | SPLIT_STRING               |      1 |   8168 |      4 |00:00:00.01 |     422 |       |       |          |
---------------------------------------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   6 - filter("I"."ITEM_WEIGHT"<="C"."MAX_WEIGHT")
  10 - access("I"."ID">"R"."ITM_ID")
  11 - filter("R"."MAX_WEIGHT">="R"."TOT_WEIGHT"+"I"."ITEM_WEIGHT")
  14 - access("I"."ID"=TO_NUMBER(TO_CHAR(VALUE(KOKBF$))))
  16 - access("C"."ID"=TO_NUMBER(TO_CHAR(VALUE(KOKBF$))))
  19 - filter("P"."RN"=1)
  20 - filter(RANK() OVER ( ORDER BY INTERNAL_FUNCTION("TOT_PROFIT") DESC )<=1)
  27 - filter(( REGEXP_INSTR ("R_C"."ITM_PATH"||"R_I"."PATH",',(\d+),.*?,\1,',HEXTORAW('D0E726B2F87F0000E031E259F67F000000000000000000008033E259F67F000000000
              000000000000000000000000000680000000000000050E826B2F87F000009000100000000000000000001000000B09B0B52F67F00000000000000000000'))=0 AND
              "R_I"."CON_ID">"R_C"."CON_ID"))

SQL_ID  02bskar3byrs3, child number 0
-------------------------------------
WITH /* XFNC */ rsf_itm (con_id, max_weight, itm_id, tot_weight,
tot_profit, path) AS ( SELECT c.id,        c.max_weight,        i.id,
     i.item_weight,        i.item_profit,        ',' || i.id || ','
FROM items i   JOIN containers c     ON i.item_weight <= c.max_weight
UNION ALL SELECT r.con_id,        r.max_weight,        i.id,
r.tot_weight + i.item_weight,        r.tot_profit + i.item_profit,
  r.path || i.id || ','   FROM rsf_itm r   JOIN items i     ON i.id >
r.itm_id    AND r.tot_weight + i.item_weight <= r.max_weight  ORDER BY
1, 2 ) , rsf_con (con_id, itm_path, tot_weight, tot_profit) AS ( SELECT
con_id,        ':' || con_id || ':' || path,        tot_weight,
tot_profit   FROM rsf_itm  UNION ALL SELECT r_i.con_id,
r_c.itm_path ||  ':' || r_i.con_id || ':' || r_i.path,
r_c.tot_weight + r_i.tot_weight,        r_c.tot_profit + r_i.tot_profit
  FROM rsf_con r_c   JOIN rsf_itm r_i     ON r_i.con_id > r_c.con_id
WHERE RegExp_Instr (r_c.itm_pat

Plan hash value: 2979087488

---------------------------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                                         | Name                       | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                                  |                            |      1 |        |      4 |00:00:00.01 |      43 |       |       |          |
|   1 |  TEMP TABLE TRANSFORMATION                        |                            |      1 |        |      4 |00:00:00.01 |      43 |       |       |          |
|   2 |   LOAD AS SELECT (CURSOR DURATION MEMORY)         | SYS_TEMP_0FD9D674A_150DC9F |      1 |        |      0 |00:00:00.01 |      28 |  1024 |  1024 |          |
|   3 |    UNION ALL (RECURSIVE WITH) BREADTH FIRST       |                            |      1 |        |     15 |00:00:00.01 |      27 |  2048 |  2048 | 2048  (0)|
|   4 |     NESTED LOOPS                                  |                            |      1 |      8 |      8 |00:00:00.01 |      21 |       |       |          |
|   5 |      TABLE ACCESS FULL                            | CONTAINERS                 |      1 |      2 |      2 |00:00:00.01 |       7 |       |       |          |
|*  6 |      TABLE ACCESS FULL                            | ITEMS                      |      2 |      4 |      8 |00:00:00.01 |      14 |       |       |          |
|   7 |     NESTED LOOPS                                  |                            |      2 |      1 |      7 |00:00:00.01 |       6 |       |       |          |
|   8 |      NESTED LOOPS                                 |                            |      2 |      1 |     19 |00:00:00.01 |       4 |       |       |          |
|   9 |       RECURSIVE WITH PUMP                         |                            |      2 |        |     15 |00:00:00.01 |       0 |       |       |          |
|* 10 |       INDEX RANGE SCAN                            | SYS_C0020363               |     15 |      1 |     19 |00:00:00.01 |       4 |       |       |          |
|* 11 |      TABLE ACCESS BY INDEX ROWID                  | ITEMS                      |     19 |      1 |      7 |00:00:00.01 |       2 |       |       |          |
|  12 |   SORT ORDER BY                                   |                            |      1 |    400 |      4 |00:00:00.01 |      14 |  2048 |  2048 | 2048  (0)|
|  13 |    WINDOW SORT                                    |                            |      1 |    400 |      4 |00:00:00.01 |      14 |  2048 |  2048 | 2048  (0)|
|* 14 |     HASH JOIN                                     |                            |      1 |    400 |      4 |00:00:00.01 |      14 |  1743K|  1743K| 1004K (0)|
|  15 |      TABLE ACCESS FULL                            | ITEMS                      |      1 |      4 |      4 |00:00:00.01 |       7 |       |       |          |
|* 16 |      HASH JOIN                                    |                            |      1 |    400 |      4 |00:00:00.01 |       7 |  1610K|  1610K|  847K (0)|
|  17 |       TABLE ACCESS FULL                           | CONTAINERS                 |      1 |      2 |      2 |00:00:00.01 |       7 |       |       |          |
|  18 |       NESTED LOOPS                                |                            |      1 |    400 |      4 |00:00:00.01 |       0 |       |       |          |
|* 19 |        VIEW                                       |                            |      1 |     10 |      1 |00:00:00.01 |       0 |       |       |          |
|* 20 |         WINDOW SORT PUSHED RANK                   |                            |      1 |     10 |      1 |00:00:00.01 |       0 |  4096 |  4096 | 4096  (0)|
|  21 |          VIEW                                     |                            |      1 |     10 |     42 |00:00:00.01 |       0 |       |       |          |
|  22 |           UNION ALL (RECURSIVE WITH) BREADTH FIRST|                            |      1 |        |     42 |00:00:00.01 |       0 |  2048 |  2048 | 2048  (0)|
|  23 |            VIEW                                   |                            |      1 |      9 |     15 |00:00:00.01 |       0 |       |       |          |
|  24 |             TABLE ACCESS FULL                     | SYS_TEMP_0FD9D674A_150DC9F |      1 |      9 |     15 |00:00:00.01 |       0 |       |       |          |
|  25 |            NESTED LOOPS                           |                            |      2 |      1 |     27 |00:00:00.01 |       0 |       |       |          |
|  26 |             RECURSIVE WITH PUMP                   |                            |      2 |        |     42 |00:00:00.01 |       0 |       |       |          |
|* 27 |             VIEW                                  |                            |     42 |      1 |     27 |00:00:00.01 |       0 |       |       |          |
|  28 |              TABLE ACCESS FULL                    | SYS_TEMP_0FD9D674A_150DC9F |     42 |      9 |    630 |00:00:00.01 |       0 |       |       |          |
|  29 |        COLLECTION ITERATOR PICKLER FETCH          | SPLIT_STRING               |      1 |     40 |      4 |00:00:00.01 |       0 |       |       |          |
---------------------------------------------------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   6 - filter("I"."ITEM_WEIGHT"<="C"."MAX_WEIGHT")
  10 - access("I"."ID">"R"."ITM_ID")
  11 - filter("R"."MAX_WEIGHT">="R"."TOT_WEIGHT"+"I"."ITEM_WEIGHT")
  14 - access("I"."ID"=TO_NUMBER(TO_CHAR(VALUE(KOKBF$))))
  16 - access("C"."ID"=TO_NUMBER(TO_CHAR(VALUE(KOKBF$))))
  19 - filter("P"."RN"=1)
  20 - filter(RANK() OVER ( ORDER BY INTERNAL_FUNCTION("TOT_PROFIT") DESC )<=1)
  27 - filter(( REGEXP_INSTR ("R_C"."ITM_PATH"||"R_I"."PATH",',(\d+),.*?,\1,',HEXTORAW('48561DB2F87F0000E031E259F67F000000000000000000008033E259F67F000000000
              0000000000000000000000000006800000000000000C8561DB2F87F000009000100000000000000000001000000B09B0B52F67F00000000000000000000'))=0 AND
              "R_I"."CON_ID">"R_C"."CON_ID"))


292 rows selected.

Elapsed: 00:00:00.13

'END:'||TO_CHAR(SYSDATE,'DD-MON-YY
----------------------------------
End: 25-NOV-2017 08:50:27

Elapsed: 00:00:00.00
